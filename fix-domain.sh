#!/bin/bash

# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –¥–æ–º–µ–Ω—É –¥–ª—è —Å–∞–π—Ç—É –ø–µ–∫–∞—Ä–Ω—ñ
# –°—Ç–≤–æ—Ä–µ–Ω–æ: @mm.slmn

echo "üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –¥–æ–º–µ–Ω—É –¥–ª—è –ü–µ–∫–∞—Ä–Ω—ñ –≤ –•–æ–¥–æ—Å—ñ–≤—Ü—ñ"
echo "================================================"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏
if [[ "$OSTYPE" == "darwin"* ]]; then
    # macOS
    HOSTS_FILE="/etc/hosts"
    echo "üì± –í–∏—è–≤–ª–µ–Ω–æ macOS"
elif [[ "$OSTYPE" == "linux-gnu"* ]]; then
    # Linux
    HOSTS_FILE="/etc/hosts"
    echo "üêß –í–∏—è–≤–ª–µ–Ω–æ Linux"
else
    echo "‚ùå –ù–µ–ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞"
    exit 1
fi

echo "üîß –í–∏–¥–∞–ª—è—é –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –¥–æ–º–µ–Ω..."

# –í–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –¥–æ–º–µ–Ω—É
sudo sed -i '' '/bakery.hodosivka$/d' "$HOSTS_FILE"

echo "‚úÖ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –¥–æ–º–µ–Ω –≤–∏–¥–∞–ª–µ–Ω–æ!"

echo "üîß –î–æ–¥–∞—é –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –¥–æ–º–µ–Ω..."

# –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –¥–æ–º–µ–Ω—É
echo "192.168.0.101 bakery.hodosivka.local" | sudo tee -a "$HOSTS_FILE"

if [ $? -eq 0 ]; then
    echo "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –¥–æ–º–µ–Ω —É—Å–ø—ñ—à–Ω–æ –¥–æ–¥–∞–Ω–æ!"
    echo "üåê –¢–µ–ø–µ—Ä –º–æ–∂–µ—Ç–µ –≤—ñ–¥–∫—Ä–∏—Ç–∏: http://bakery.hodosivka.local"
else
    echo "‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –¥–æ–º–µ–Ω—É"
    echo "üìã –î–æ–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É –≤ $HOSTS_FILE:"
    echo "192.168.0.101 bakery.hodosivka.local"
fi

echo ""
echo "üì± –î–ª—è –¥–æ—Å—Ç—É–ø—É –∑ —Ç–µ–ª–µ—Ñ–æ–Ω—É:"
echo "1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ç–µ–ª–µ—Ñ–æ–Ω –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ —Ç—ñ—î—ó –∂ Wi-Fi –º–µ—Ä–µ–∂—ñ"
echo "2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ: http://bakery.hodosivka.local"
echo "3. –ê–±–æ –≤—ñ–¥—Å–∫–∞–Ω—É–π—Ç–µ QR –∫–æ–¥ –∑ qr.html"

echo ""
echo "üéØ –î–æ–º–µ–Ω –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ!"
echo "üåê http://bakery.hodosivka.local" 